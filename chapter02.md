## 의존성 역전하기


### `단일 책임 원칙`

통상적인 일반적인 해석은 '하나의 컴포넌트는 오로지 한가지 일만 해야 하고 그것을 올바르게 수행해야 한다'
실제의도와 단일 책임 원칙의 실제 정의 '컴포넌트를 변경하는 이유는 오직 하나뿐이여야 한다'
만약 컴포넌트를 변경할 이유가 오로지 한가지라면 컴포넌트는 딱 한가지 일만하게 된다. 하지만 이보다 더 중요한 것은 변경할 이유가 오직 한가지라는 그 자체다.

아키텍쳐에서의 이의 의미는 '우리가 어떤 다른 이유로 소프트웨어를 변경하더라도 이 컴포넌트에 대해서는 전혀 신경 쓸 필요가 없다'
왜냐하면 소프트웨어가 변경하더라도 여전히 우리가 기대한 대로 동작할것이기 때문.

### `의존성 역전 원칙`
영속성 계층에 대한 도메인 계층의 의존성 때문에 영속성 계층을 변경할때마다 잠재적으로 도메인 계층도 변경해야 한다.
그러나 도메인 코드는 어플리케이션에서 가장 중요한 코드이므로 영속성 코드에 의해서 변경되게 하고 싶지 않다.

코드상의 어떤 의존성이든 그 방향을 바꿀수 있다.
1. 엔티티는 도메인 객체를 표현하고 도메인 코드는 이 엔티티들의 상태를 변경하는 일을 중심으로 하기 때문에 먼저 엔티티를 도메인 계층으로 올린다.
2. 영속성 계층의 리포지토리가 도메인 계층에 있는 엔티티에 의존하기 때문에 두 계층 사이의 순환 의존성이 생긴다.
3. 이 부분을 해결을 위해 도메인 계층에 리포지토리에 대한 인터페이스를 만들고 실제 리포지토리는 영속성 계층에서 구현한다.

